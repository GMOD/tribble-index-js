# tribble-index

[![Generated with nod](https://img.shields.io/badge/generator-nod-2196F3.svg?style=flat-square)](https://github.com/diegohaz/nod)
[![NPM version](https://img.shields.io/npm/v/tribble-index.svg?style=flat-square)](https://npmjs.org/package/tribble-index)
[![Build Status](https://img.shields.io/travis/rbuels/tribble-index/master.svg?style=flat-square)](https://travis-ci.org/rbuels/tribble-index) 

Read htsjdk Tribble indexes (e.g. \*.vcf.idx files) using pure JavaScript. Supports only Tribble version 3 linear indexes right now.

## Install

    $ npm install --save tribble-index

## Usage

```js
import fs from 'fs'
import read from 'tribble-index'
// or without ES6
var fs = require('fs')
var read = require('tribble-index').default.read

fs.readFile('path/to/data.vcf.idx', (err, buffer) => {
  const index = read(buffer);

  console.log(index.header)
  const blocks = index.getBlocks("ctgA",123000,456000)

  // can now use these blocks from the index to read the file
  // regions of interest
  fs.open('path/to/data.vcf', 'r', (err, fd) => {
    if (err) throw err
    blocks.forEach(({ length, offset }) => {
      const buffer = Buffer.alloc(length)
      fs.read(fd, buffer, 0, length, offset, (err, buffer) => {
        console.log('got file data', buffer)
      })
    })
    fs.close(fd, (err) => {
      if (err) throw err
    })
  })
})
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [getBlocks](#getblocks)
-   [hasRefSeq](#hasrefseq)
-   [read](#read)

### getBlocks

Get an array of { offset, length } objects describing regions of the
indexed file containing data for the given range.

**Parameters**

-   `refName` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** name of the reference sequence
-   `start` **integer** start coordinate of the range of interest
-   `end` **integer** end coordinate of the range of interest

### hasRefSeq

Return true if the given reference sequence is present in the index,
false otherwise

**Parameters**

-   `refName` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** 

### read

Parse the index from the given Buffer object. The buffer must contain
the entire index.

**Parameters**

-   `input` **[Buffer](https://nodejs.org/api/buffer.html)** 

Returns **(LinearIndex | IntervalTreeIndex)** an index object supporting the `getBlocks` method

## License

MIT Â© [Robert Buels](https://github.com/rbuels)
